parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function n(e,t){if(!e)throw new Error(t)}var r=["p","q","r","s","a","b","x","y"],i=[],s=function(){return function(){}}(),o=function(t){function n(e){var n=t.call(this)||this;return n.symbol=e,n}return e(n,t),n.prototype.evaluate=function(e){return e[this.symbol]},n}(s),l=function(t){function n(e){var n=t.call(this)||this;return n.e=e,n}return e(n,t),n.prototype.evaluate=function(e){return!this.e.evaluate(e)},n}(s),a=function(t){function n(e,n){var r=t.call(this)||this;return r.a=e,r.b=n,r}return e(n,t),n.prototype.evaluate=function(e){return this.a.evaluate(e)&&this.b.evaluate(e)},n}(s),c=function(t){function n(e,n){var r=t.call(this)||this;return r.a=e,r.b=n,r}return e(n,t),n.prototype.evaluate=function(e){return this.a.evaluate(e)||this.b.evaluate(e)},n}(s),u=function(t){function n(e,n){var r=t.call(this)||this;return r.a=e,r.b=n,r}return e(n,t),n.prototype.evaluate=function(e){return this.a.evaluate(e)==this.b.evaluate(e)},n}(s),h=function(t){function n(e,n){var r=t.call(this)||this;return r.a=e,r.b=n,r}return e(n,t),n.prototype.evaluate=function(e){var t=this.a.evaluate(e),n=this.b.evaluate(e);return!t||n},n}(s),d=function(t){function n(e){var n=t.call(this)||this;return n.value=e,n}return e(n,t),n.prototype.evaluate=function(e){return this.value},n}(s),f=function(){return function(e,t){if(!e&&!t)throw new Error("Neither expression nor message defined");this.expr=e,this.msg=t}}(),p=function(){function e(e){this.s=e}return e.prototype.consume_whitespace=function(){var e,t=null===(e=this.s.match(/^[ ]*/))||void 0===e?void 0:e[0].length;this.s=this.s.slice(t)},e.prototype.parse=function(e){if(this.consume_whitespace(),e<=0){var t=this.s.match(/^[a-zA-Z_]+/);return null==t||["T","F"].includes(t[0])?this.s.length>0&&"("==this.s[0]?(this.s=this.s.slice(1),this.consume_whitespace(),(p=this.parse(10)).msg?p:(this.consume_whitespace(),this.s.length<1||")"!=this.s[0]?new f(void 0,"Expected close bracket"):(this.s=this.s.slice(1),this.consume_whitespace(),p))):this.s.length>0&&["⊤","T"].includes(this.s[0])?(this.s=this.s.slice(1),this.consume_whitespace(),new f(new d(!0),void 0)):this.s.length>0&&["⊥","F"].includes(this.s[0])?(this.s=this.s.slice(1),this.consume_whitespace(),new f(new d(!1),void 0)):this.s.length>0?new f(void 0,'Incorrect formulation (around character "'+this.s[0]+'")'):new f(void 0,"Incorrect formulation (around the end of input)"):(this.s=this.s.slice(t[0].length),i.includes(t[0])?new f(new o(t[0]),void 0):new f(void 0,'Unrecognised variable "'+t[0]+'"'))}if(1==e){var r=0;for(this.consume_whitespace();this.s.length>0&&["~","!","¬"].includes(this.s[0]);)this.s=this.s.slice(1),this.consume_whitespace(),r+=1;if((p=this.parse(e-1)).msg)return p;for(;r>0;)n(p.expr),p=new f(new l(p.expr),p.msg),r-=1,console.log(r);return p}if(3==e){if((p=this.parse(e-1)).msg)return p;for(this.consume_whitespace();this.s.length>0&&["∧","&","."].includes(this.s[0]);){if(this.s=this.s.slice(1),this.consume_whitespace(),(s=this.parse(e-1)).msg)return s;this.consume_whitespace(),n(p.expr),n(s.expr),p=new f(new a(p.expr,s.expr),p.msg)}return p}if(4==e){if((p=this.parse(e-1)).msg)return p;for(this.consume_whitespace();this.s.length>0&&["∨","+","|"].includes(this.s[0]);){if(this.s=this.s.slice(1),this.consume_whitespace(),(s=this.parse(e-1)).msg)return s;this.consume_whitespace(),n(p.expr),n(s.expr),p=new f(new c(p.expr,s.expr),p.msg)}return p}if(5==e){if((p=this.parse(e-1)).msg)return p;for(this.consume_whitespace();this.s.length>0&&["→",">"].includes(this.s[0]);){if(this.s=this.s.slice(1),this.consume_whitespace(),(s=this.parse(e-1)).msg)return s;this.consume_whitespace(),n(p.expr),n(s.expr),p=new f(new h(p.expr,s.expr),p.msg)}return p}if(6==e){if((p=this.parse(e-1)).msg)return p;for(this.consume_whitespace();this.s.length>0&&["↔","=","≡","⊨"].includes(this.s[0]);){var s;if(this.s=this.s.slice(1),this.consume_whitespace(),(s=this.parse(e-1)).msg)return s;this.consume_whitespace(),n(p.expr),n(s.expr),p=new f(new u(p.expr,s.expr),p.msg)}return p}var p=this.parse(e-1);return this.consume_whitespace(),p},e.prototype.parse_fully=function(){var e=this.parse(10);return!e.msg&&this.s.length>0?new f(void 0,'Failed to fully read input around "'+this.s+'"'):e},e}();function v(){var e=document.getElementById("variable-logic-input").value.split(/[ ,]+/).filter(Boolean),t=e.length==i.length&&e.every(function(e,t){return e===i[t]});console.log(t,e,i),t||(i=e,m())}function m(){for(var e,n,s=document.getElementById("variable-select-btns");s.firstChild;)s.removeChild(s.firstChild);var o=new Set(r.concat(i)),l=function(e){var t=document.createElement("button"),n=i.includes(e);t.innerText=e+(n?" ✔":""),n&&(t.style.border="3px red solid"),t.addEventListener("click",function(t){i.includes(e)?i=i.filter(function(t){return t!=e}):i.push(e),m()}),s.appendChild(t)};try{for(var a=t(o),c=a.next();!c.done;c=a.next()){l(c.value)}}catch(u){e={error:u}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}document.getElementById("variable-logic-input").value=i.join(", "),y(),g()}function y(){var e,n,r,s,o=document.getElementById("option-logic-symbols-hints"),l=document.getElementById("option-logic-symbols-synonyms"),a=o.checked,c=l.checked,u=[[" → ","→","implies"],["¬","¬","negation"],[" ∧ ","∧","conjunction"],[" ∨ ","∨","disjunction"],[" ↔ ","↔","iff"],["(","(",""],[")",")",""],["⊤","⊤","tautology"],["⊥","⊥","contradiction"]];c&&(u=u.concat([[" = ","=","equals"],[" ≡ ","≡","if and only if"],[" ⊨ ","⊨","semantically entails"],["T","T","true"],["F","F","false"]]));try{for(var h=t(i),d=h.next();!d.done;d=h.next()){var f=d.value;u.push([f,f,"variable"])}}catch(y){e={error:y}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}var p=function(e){for(var n,r;e.firstChild;)e.removeChild(e.firstChild);var i=function(t){var n=document.createElement("button");n.innerText=t[1]+(a&&t[2]?" ("+t[2]+")":""),n.addEventListener("click",function(){var n=e.parentElement;console.log(n);var r=n.getElementsByClassName("logic-input-line")[0].getElementsByClassName("logic-input")[0],i=r.selectionStart;r.value=r.value.slice(0,r.selectionStart)+t[0]+r.value.slice(r.selectionStart),r.focus(),r.selectionStart=r.selectionEnd=i+t[0].length,g()}),e.appendChild(n)};try{for(var s=(n=void 0,t(u)),o=s.next();!o.done;o=s.next()){i(o.value)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}};try{for(var v=t(Array.prototype.slice.call(document.getElementsByClassName("virt-btn-keyboard virt-btn-logic-symbs"))),m=v.next();!m.done;m=v.next()){p(m.value)}}catch(w){r={error:w}}finally{try{m&&!m.done&&(s=v.return)&&s.call(v)}finally{if(r)throw r.error}}}function g(){setTimeout(w,10)}function w(){var e,r,s,o,l,a,c=Array.prototype.slice.call(document.getElementsByClassName("conclusions-input-box")),u=Array.prototype.slice.call(document.getElementsByClassName("premises-input-box")),h=[],d=[];try{for(var f=t(c),v=f.next();!v.done;v=f.next()){var m=v.value,y=m.getElementsByClassName("logic-output-err")[0],g=m.getElementsByClassName("logic-input")[0].value,w=new p(g).parse_fully();y.classList.remove("all-good"),w.msg?y.innerText=w.msg+"\n":(y.innerText="",n(w.expr),h.push({e:w.expr,b:y}))}}catch(L){e={error:L}}finally{try{v&&!v.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}try{for(var x=t(u),b=x.next();!b.done;b=x.next()){var E=b.value;y=E.getElementsByClassName("logic-output-err")[0],g=E.getElementsByClassName("logic-input")[0].value;(w=new p(g).parse_fully()).msg?y.innerText=w.msg+"\n":(y.innerText="",n(w.expr),d.push({e:w.expr,b:y}))}}catch(N){s={error:N}}finally{try{b&&!b.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}function _(e){var t=[];for(var n in e){e[n]?t.push(""+n):t.push("¬"+n)}return console.log(e,t.join(", ")),t.join(", ")}!function e(n,r){if(0==n.length)!function(e){var n,r,i,s;try{for(var o=t(d),l=o.next();!l.done;l=o.next())if(!(u=l.value).e.evaluate(e))return}catch(f){n={error:f}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}try{for(var a=t(h),c=a.next();!c.done;c=a.next()){var u;(u=c.value).e.evaluate(e)||(u.b.innerText+="Case failed for "+_(e)+"\n")}}catch(p){i={error:p}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}}(r);else{var i=Object.assign({},r);i[n[0]]=!1;var s=Object.assign({},r);s[n[0]]=!0,e(n.slice(1),i),e(n.slice(1),s)}}(i,{});try{for(var B=t(h),C=B.next();!C.done;C=B.next()){var I=C.value;""==I.b.innerText&&(I.b.classList.add("all-good"),I.b.innerText="All cases correct ✅")}}catch(k){l={error:k}}finally{try{C&&!C.done&&(a=B.return)&&a.call(B)}finally{if(l)throw l.error}}}function x(){var e,n,r,i,s,o;y();try{for(var l=t(Array.prototype.slice.call(document.getElementsByClassName("logic-input"))),a=l.next();!a.done;a=l.next()){var c=a.value;c.spellcheck=!1,c.autocapitalize="off",c.autocomplete="off"}}catch(v){e={error:v}}finally{try{a&&!a.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}try{for(var u=t(Array.prototype.slice.call(document.getElementsByClassName("logic-input"))),h=u.next();!h.done;h=u.next()){(p=h.value).addEventListener("input",g),p.addEventListener("change",g)}}catch(m){r={error:m}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}try{for(var d=t(Array.prototype.slice.call(document.getElementsByClassName("logic-remove-premise"))),f=d.next();!f.done;f=d.next()){var p;(p=f.value).addEventListener("click",function(){var e,t,n;null===(n=null===(t=null===(e=null===this||void 0===this?void 0:this.parentElement)||void 0===e?void 0:e.parentElement)||void 0===t?void 0:t.parentElement)||void 0===n||n.remove(),g()})}}catch(w){s={error:w}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}}function b(){var e,n,r=new URL(window.location.href).searchParams.get("s");if(r){var s=decodeURIComponent(escape(atob(decodeURIComponent(r))));console.log("JSON: "+s);var o=JSON.parse(s);i=o.v,document.getElementById("logic-conclusion-input").value=o.c;try{for(var l=t(o.a),a=l.next();!a.done;a=l.next()){E(a.value)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}g()}}function E(e){var t,n,r=document.createElement("div");r.classList.add("big-box"),r.classList.add("premises-input-box"),r.innerHTML='\n    <div class="inner-input-box">\n        <div class="logic-input-line">\n            <h2>Premise</h2>\n            <input class="logic-input">\n            <button class="logic-remove-premise">Remove</button>\n        </div>\n        <div id="conclusions-select-btns" class="virt-btn-keyboard virt-btn-logic-symbs"></div>\n    </div>\n    <div class="logic-output-err"></div>',r.getElementsByClassName("logic-input")[0].value=e,null===(n=null===(t=document.getElementById("make-new-assumption"))||void 0===t?void 0:t.parentElement)||void 0===n||n.insertBefore(r,document.getElementById("make-new-assumption")),x(),g()}window.addEventListener("load",function(){var e,t,r,s;b(),m();var o=document.getElementById("variable-logic-input");n(o),o.addEventListener("change",v),o.addEventListener("input",v),x(),null===(e=document.getElementById("option-logic-symbols-hints"))||void 0===e||e.addEventListener("click",y),null===(t=document.getElementById("option-logic-symbols-synonyms"))||void 0===t||t.addEventListener("click",y),null===(r=document.getElementById("make-new-assumption"))||void 0===r||r.addEventListener("click",function(){E("")}),null===(s=document.getElementById("share-btn"))||void 0===s||s.addEventListener("click",function(){var e={v:[],a:[],c:""};function t(e){return Array.prototype.slice.call(document.getElementsByClassName(e)).map(function(e){return e.getElementsByClassName("logic-input")[0].value})}e.v=i,e.a=t("premises-input-box"),e.c=t("conclusions-input-box")[0];var n=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),r=window.location.href.slice(0,window.location.href.length-window.location.search.length);prompt("Please share/save this URL to return to your logic system:",r+"?s="+window.encodeURIComponent(n))})});
},{}]},{},["QCba"], null)
//# sourceMappingURL=src.0a015833.js.map